/*!
  * loco - v1.0
  * https://github.com/peterprins/loco
  *
  * Copyright 2015 Peter Prins
  * Released under the MIT license
  * http://mit-license.org/
  *
  * Date: 2015-04-20
  */

var $ready=function(e){document.addEventListener("DOMContentLoaded",function(){console.log("get ready!"),console.log("callback: ",e),e()},!1)},$loco=function(e){console.log("get loco!");var t={onEvent:function(t,n){var s={event_str:t,callback_fn:n};return this.js_out=this.updateEl(e,s,"onEvent")?!0:!1,this},lowerCase:function(t){return this.js_out=this.updateEl(e,t,"lowerCase")?!0:!1,this},upperCase:function(t){return this.js_out=this.updateEl(e,t,"upperCase")?!0:!1,this},camelCase:function(t){return this.js_out=this.updateEl(e,t,"camelCase")?!0:!1,this},trimHTML:function(t){return this.js_out=this.updateEl(e,t,"trimHTML")?!0:!1,this},addClass:function(t){return this.js_out=this.updateEl(e,t,"addClass")?!0:!1,this},removeClass:function(t){return this.js_out=this.updateEl(e,t,"removeClass")?!0:!1,this},addHTML:function(t){return this.js_out=this.updateEl(e,t,"addHTML")?!0:!1,this},appendHTML:function(t){return this.js_out=this.updateEl(e,t,"appendHTML")?!0:!1,this},replaceHTML:function(t){return this.js_out=this.updateEl(e,t,"replaceHTML")?!0:!1,this},addStyle:function(t){return this.js_out=this.updateEl(e,t,"addStyle")?!0:!1,this},removeStyle:function(t){return this.js_out=this.updateEl(e,t,"removeStyle")?!0:!1,this},JSON2UL:function(t){return this.js_out=this.updateEl(e,t,"JSON2UL")?!0:!1,this},isInObject:function(e,t){for(var n in e)for(var s in t)if(e[n]==t[s]){if("object"!=typeof i)var i=[];i.push(n)}return"object"!=typeof i?!1:i},updateEl:function(e,t,n){if("string"==typeof e)var s=document.querySelectorAll(e);else{var s=[];s.push(e)}for(var i in s){var a=s[i];if("object"==typeof a)try{if("removeClass"==n||"addClass"==n)var r=s[i].className.split(" "),o=t.split(" "),l=this.isInObject(r,o);switch(console.log("updateEl: "+n),n){case"onEvent":var c=t.event_str.split(" ");for(event_key in c)c[event_key]=c[event_key].trim(),a.addEventListener(c[event_key],t.callback_fn),console.log(c[event_key]+" event added to ",a);break;case"removeClass":if("object"==typeof l){for(result in l)r.splice(l[result],1);var u=r.toString().replace(/\,/g," "),u=u.trim();a.className=u}break;case"addClass":"object"!=typeof l&&(a.className=a.className?a.className+=" "+t:t);break;case"JSON2UL":var p=JSON.parse(a.innerHTML),d="<ul>\n";for(li in p)d+="	<li>"+p[li]+"</li>\n";d+="</ul>\n",a.innerHTML=d;break;case"upperCase":a.innerHTML=a.innerHTML.toUpperCase();break;case"lowerCase":a.innerHTML=a.innerHTML.toLowerCase();break;case"camelCase":a.innerHTML=a.innerHTML.toLowerCase(),a.innerHTML=a.innerHTML.replace(/\b(\w)/gi,function(e){return e.toUpperCase()});case"trimHTML":a.innerHTML=a.innerHTML.trim();break;case"replaceHTML":var h=t.split(":");a.innerHTML=a.innerHTML.replace(h[0],h[1]);break;case"appendHTML":a.innerHTML+="object"==typeof t?JSON.stringify(t):t;break;case"addHTML":a.innerHTML="object"==typeof t?JSON.stringify(t):t;break;case"removeStyle":var f=!0;case"addStyle":if("object"!=typeof l)if("object"==typeof t)for(var y in t)a.style[y]=t[y];else{var v=t.split(";");for(var j in v){var m=v[j].split(":");for(var y in m){var L=m[0].trim(),b=m[1].trim();a.style[L]=f?"":b}}}}}catch(T){}}return!0}};return t},$ajax=function(e,t){var n=[],s={url:null,method:null,type:null,data:null,callback:null,response:function(){return n[0]},element_id:null,init:function(){"object"!=typeof e&&"string"!=typeof e?(this.method="GET",this.type="application/json"):("object"==typeof e?this.url=e.url:"string"==typeof e&&(this.url=e),this.method=e.method?e.method:"GET",this.type="POST"==this.method?e.type?e.type:"application/x-www-form-urlencoded;charset=UTF-8":e.type?e.type:"application/json",this.data=e.data?JSON.stringify(e.data):null)},updateID:function(e,t){if("string"!=typeof t&&"object"!=typeof t||"string"!=typeof e){if(200==this.status){var s=document.getElementById(element_id);n[0]=this.response,s.innerHTML=this.response}}else{var s=document.getElementById(e);try{s.innerHTML=JSON.stringify(t)}catch(i){s.innerHTML=t}}},getJSONObj:function(){if(200==this.status){n[0]=this.response;try{var e=JSON.parse(this.response)}catch(s){var e=this.response}}t(e)},load:function(){console.log("get ajax!"),this.init(),json=new XMLHttpRequest,json.type=this.type,"function"==typeof t?this.callback=this.getJSONObj:"string"==typeof t?(this.element_id=t,element_id=t,this.callback=this.updateID):this.callback=null,null!==this.callback&&(json.addEventListener?json.addEventListener("load",this.callback,!1):json.readyState&&(json.onreadystatechange=this.callback)),json.open(this.method,this.url),"POST"==this.method&&json.setRequestHeader("Content-type",this.type),json.send(this.data)}};return("object"==typeof e||"string"==typeof e)&&s.load(),s};